---
# override/additions to docker-stack.yml for deploying to the ude-vet swarm
version: '3.7'
services:
  pfm-web:
    configs:
      - source: doc-ude-vet.html
        target: /usr/share/nginx/html/custom/doc-ude-vet.html
    secrets:
      - source: ude-vet.riffremote.com.key.7
        target: site.key
      - source: ude-vet.riffremote.com.crt.7
        target: site.crt

  pfm-riffdata:
    configs:
      # override the normal config defined in docker-stack.yml so that it can be replaced
      - source: riffdata.local-production.yml.1
        target: /app/config/unused1
      # this riffdata config include the googledoc api key replaces the above default config
      - source: riffdata.local-production.yml.2
        target: /app/config/local-production.yml

  pfm-riffrtc:
    configs:
      # override the normal config defined in docker-stack.yml so that it can be replaced
      - source: riff-rtc.local-production.yml.8.debug
        target: /app/config/unused1
      # UDE-VET riff-rtc specific config replaces the above default config
      - source: riff-rtc.ude-vet-local-production.yml.3
        target: /app/config/local-production.yml

# Your cert will expire on 2022-01-05 (ude-vet key.7 & crt.7)
secrets:
  ude-vet.riffremote.com.key.7:
    external: true
  ude-vet.riffremote.com.crt.7:
    external: true

configs:
  doc-ude-vet.html:
    external: true
  riffdata.local-production.yml.2:
    external: true
  riff-rtc.ude-vet-local-production.yml.3:
    external: true
